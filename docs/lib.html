<!DOCTYPE html>
<html id="html-tag" lang="en">
  <script>
   const $htmlTag = document.querySelector("#html-tag")
   const urlParams = new URL(window.location.toLocaleString()).searchParams;
   const lvar= urlParams.get('lang');
   switch(lvar) {
     case "hu":
       $htmlTag.lang = "hu"
       $htmlTag.classList.add("hungarianLang")
       break
     default:
       $htmlTag.classList.add("englishLang")
       break
   }
  </script>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <link rel="stylesheet" href="p12.css">
    <title>p2223 function library</title>
  </head>
  
  <body>

    <span lang="hu">Lang:</span> <span lang="en">Nyelv:</span>
    <a href="lib.html?lang=hu">HU</a>
    <a href="lib.html?lang=en">EN</a>

    <h1>
      <psan lang="en">p2223 function library</psan>
      <span lang="hu">p2223 függvény könyvtár</span>
    </h1>

    <p>A fejlesztőrendszerben a projekt alkalmazásának lefordítása
    során a program kiegészül a rendszerben elérhető
    függvényekkel. Ezeken túl a pmon monitorprogram függvényei is
    hívhatók.</p>
      
    <h2>
      <span lang="en">Output functions</span>
      <span lang="hu">Kimeneti függvények</span>
    </h2>

    <table border="1">
      <tr><th><span lang="hu">Kiemenet(ek)</span><span lang="en">Output(s)</span></th>
	<th><span lang="hu">Függvény</span><span lang="en">Function</span></th>
	<th><span lang="hu">Bemenet</span> <span lang="en">Input(s)</span></th>
      </tr>
      <tr><td>-</td>
	<td><a href="lib_out.html#putchar">putchar</a></td>
	<td>(R0:chr)</td>
      </tr>
      <tr><td>-</td>
	<td><a href="lib_out.html#prints">prints</a></td>
	<td>(R0:str)</td>
      </tr>
      <tr><td>-</td>
	<td><a href="lib_out.html#printsnl">printsnl</a></td>
	<td>(R0:str)</td>
      </tr>
      <tr><td>-</td>
	<td><a href="lib_out.html#printh">printh</a></td>
	<td>(R0:val, R1:sep_len)</td>
      </tr>
      <tr><td>-</td>
	<td><a href="lib_out.html#printd">printd</a></td>
	<td>(R0:val)</td>
      </tr>
      <tr><td>-</td>
	<td><a href="lib_out.html#eprints">eprints</a></td>
	<td>-</td>
      </tr>
      <tr><td>-</td>
	<td><a href="lib_out.html#printf">printf</a></td>
	<td>(R0:str, R1:par, ...)</td>
      </tr>
      <tr><td>-</td>
	<td><a href="lib_out.html#eprintf">eprintf</a></td>
	<td>(R1:par, ...)</td>
      </tr>
    </table>
    <!-- 
    <tr><td></td>
      <td><a href="lib_out.html#"></a></td>
      <td>(R0:str)</td>
    </tr>
    -->
    
    <h2>
      <span lang="en">Input functions</span>
      <span lang="hu">Bemeneti függvények</span>
    </h2>


    <h3>input_avail</h3>

    <ul>
      <li><span lang="en">Input(s):</span>
	<span lang="hu">Bemenet(ek):</span>
	<span lang="en"></span>
	<span lang="hu"></span>
      </li>
      <li><span lang="en">Output(s):</span>
	<span lang="hu">Kimenet(ek):</span>
	<span lang="en">Flag.C=1 if input is available</span>
	<span lang="hu">Flag.C=1 ha van bemenő adat</span>
      </li>
    </ul>

    <p>Az UART vevő állapotának vizsgálata. Azt mutatja meg, hogy
    van-e az UART-ban beolvasható vett karakter, ha igen, a flag
    regiszter C bitje 1 lesz.</p>

    
    <h3>getchar</h3>

    <ul>
      <li><span lang="en">Input(s):</span>
	<span lang="hu">Bemenet(ek):</span>
	<span lang="en">-</span>
	<span lang="hu">-</span>
      </li>
      <li><span lang="en">Output(s):</span>
	<span lang="hu">Kimenet(ek):</span>
	<span lang="en">Flag.C=1, R4=received character</span>
	<span lang="hu">Flag.C=1, R4=beolvasott karakter</span>
      </li>
    </ul>

    <p>Várakozás egy karakter vételére, majd a karakter kiolvasása az
    UART áramkörből.</p>

    
    <h3>read</h3>

    <ul>
      <li><span lang="en">Input(s):</span>
	<span lang="hu">Bemenet(ek):</span>
	<span lang="en">-</span>
	<span lang="hu">-</span>
      </li>
      <li><span lang="en">Output(s):</span>
	<span lang="hu">Kimenet(ek):</span>
	<span lang="en">R4=received character</span>
	<span lang="hu">R4=vett karakater</span>
      </li>
    </ul>

    <p>Az UART vevő áramkörének kiolvasása. A szubrutin nem vár új
    karakterre, a vevő állapotát előzőleg az input_avail funkcióval
    kell vizsgálni.</p>


    <h3>le_init</h3>

    <ul>
      <li><span lang="en">Input(s):</span>
	<span lang="hu">Bemenet(ek):</span>
	<span lang="en">R0=buffer address, R1=buffer length</span>
	<span lang="hu">R0=puffer címe, R1=puffer hossza</span>
      </li>
      <li><span lang="en">Output(s):</span>
	<span lang="hu">Kimenet(ek):</span>
	<span lang="en">-</span>
	<span lang="hu">-</span>
      </li>
    </ul>

    <p>A sor beolvasó függvény számára beállítja a beolvasáshoz
    használandó puffer címét és méretét. A puffert üresre állítja, így
    a sor beolvasása elkezdhető.</p>


    <h3>le_start</h3>

    <ul>
      <li><span lang="en">Input(s):</span>
	<span lang="hu">Bemenet(ek):</span>
	<span lang="en">-</span>
	<span lang="hu">-</span>
      </li>
      <li><span lang="en">Output(s):</span>
	<span lang="hu">Kimenet(ek):</span>
	<span lang="en">-</span>
	<span lang="hu">-</span>
      </li>
    </ul>

    <p>A sor beolvasó függvény által használt puffert kiüríti, így új
    beolvasás kezdhető.</p>


    <h3>le_read</h3>

    <ul>
      <li><span lang="en">Input(s):</span>
	<span lang="hu">Bemenet(ek):</span>
	<span lang="en">-</span>
	<span lang="hu">-</span>
      </li>
      <li><span lang="en">Output(s):</span>
	<span lang="hu">Kimenet(ek):</span>
	<span lang="en">Flag.C=1 if line read is ready (ENTER pressed)</span>
	<span lang="hu">Flag.C=1 ha a sor beolvasás kész (ENTER-t lenyomták)</span>
      </li>
    </ul>

    <p>Megvizsgálja, hogy van-e beolvasható karakter, ha igen,
    elhelyezi a sor pufferben, amíg az meg nem telik. Kezeli a
    backspace törlő billentyűt. Ha a bevitel közben megnyomták az
    ENTER-t, akkor a C flag-et 1-be állítja.</p>


    <h2>
      <span lang="en">Character functions</span>
      <span lang="hu">Karakter kezelő függvények</span>
    </h2>


    <h3>isdigit</h3>
    
    <ul>
      <li><span lang="en">Input(s):</span>
	<span lang="hu">Bemenet(ek):</span>
	<span lang="en">R0=character</span>
	<span lang="hu">R0=karakter</span>
      </li>
      <li><span lang="en">Output(s):</span>
	<span lang="hu">Kimenet(ek):</span>
	<span lang="en">Flag.C=1 if character is number</span>
	<span lang="hu">Flag.C=1 ha a karakter számjegy</span>
      </li>
    </ul>

    <p>Az R0 regiszterben lévő karakterkód vizsgálata, hogy az egy
    számjegy (0-9) ascii kódja-e. Ha igen, a flag regiszter C bitje 1
    lesz.</p>    


    <h3>islower</h3>
    
    <ul>
      <li><span lang="en">Input(s):</span>
	<span lang="hu">Bemenet(ek):</span>
	<span lang="en">R0=character</span>
	<span lang="hu">R0=karakter</span>
      </li>
      <li><span lang="en">Output(s):</span>
	<span lang="hu">Kimenet(ek):</span>
	<span lang="en">Flag.C=1 if character is lowercase letter</span>
	<span lang="hu">Flag.C=1 ha a karakter kibetű</span>
      </li>
    </ul>

    <p>Az R0 regiszterben lévő karakterkód vizsgálata, hogy az egy
      kisbetű (a-z) ascii kódja-e. Ha igen, a flag regiszter C bitje 1
      lesz.</p>    


    <h2>
      <span lang="en">String functions</span>
      <span lang="hu">Szövegkezelő függvények</span>
    </h2>


    <h3>dtoi</h3>

    <ul>
      <li><span lang="en">Input(s):</span>
	<span lang="hu">Bemenet(ek):</span>
	<span lang="en">R0=address of string</span>
	<span lang="hu">R0=sztring címe</span>
      </li>
      <li><span lang="en">Output(s):</span>
	<span lang="hu">Kimenet(ek):</span>
	<span lang="en">R4=converted value, Flag.C=1 if successfull</span>
	<span lang="hu">R4=konvertált érték, Flag.C=1 ha sikeres</span>
      </li>
    </ul>

    <p>Decimális szám leírását tartalmazó sztring átalakítása
    számmá. A számnak pozitívnak kell lennie, előjel karaktert nem
    tartalmazhat. Ha a sztring nem tartalmaz hibás, érvénytelen
    karaktert, akkor a flag regiszter C bitje 1 lesz. Ellenkező
    esetben a konverzió befejeződik a hibás karakternél.</p>


    <h3>htoi</h3>

    <ul>
      <li><span lang="en">Input(s):</span>
	<span lang="hu">Bemenet(ek):</span>
	<span lang="en">R0=address of string</span>
	<span lang="hu">R0=sztring címe</span>
      </li>
      <li><span lang="en">Output(s):</span>
	<span lang="hu">Kimenet(ek):</span>
	<span lang="en">R4=converted value, Flag.C=1 if successfull</span>
	<span lang="hu">R4=konvertált érték, Flag.C=1 ha sikeres</span>
      </li>
    </ul>

    <p>Hexadecimális szám leírását tartalmazó sztring átalakítása
      számmá. A számnak pozitívnak kell lennie, előjel karaktert nem
      tartalmazhat. Az a-f számjegyek kis és nagybetűk is lehetnek. Ha
      a sztring nem tartalmaz hibás, érvénytelen karaktert, akkor a
      flag regiszter C bitje 1 lesz. Ellenkező esetben a konverzió
      befejeződik a hibás karakternél.</p>

    
    <h3>str_chr</h3>

    <ul>
      <li><span lang="en">Input(s):</span>
	<span lang="hu">Bemenet(ek):</span>
	<span lang="en">R0=string, R1=character</span>
	<span lang="hu">R0=sztring, R1=karakter</span>
      </li>
      <li><span lang="en">Output(s):</span>
	<span lang="hu">Kimenet(ek):</span>
	<span lang="en">Flag.C=1 if found, R4=address of char in string, R5=byte index in word</span>
	<span lang="hu">Flag.C=1 ha megtalálható, R4=megtalált karakter címe, R5=byte sorszáma a szóban</span>
      </li>
    </ul>

    <p>Az R1 regiszterben lévő karakter keresése az R0 címen kezdődő
    sztringben, a kis- és a nagybetűk különbözőnek számítanak. Ha a
    keresett karakter megtalálható a szövegben, akkor az R4 a karakter
    tartalmazó szó címe lesz, az R5 pedig a karakter indexe a
    szóban. Ha nincs találat, az R4 és R5 0 lesz. A találatot a flag
    regiszter C bitjének 1 értéke jelzi.</p>

    
    <h3>str_eq</h3>

    <ul>
      <li><span lang="en">Input(s):</span>
	<span lang="hu">Bemenet(ek):</span>
	<span lang="en">R0=string1, R1=string2</span>
	<span lang="hu">R0=sztring1, R1=sztring2</span>
      </li>
      <li><span lang="en">Output(s):</span>
	<span lang="hu">Kimenet(ek):</span>
	<span lang="en">Flag.C=1 if equal</span>
	<span lang="hu">Flag.C=1 ha megegyeznek</span>
      </li>
    </ul>

    <p>Két sztring összehasonlítása, a kis- és a nagybetűk
    különbözőnek számítanak. Egyezés esetén a flag regiszter C bitje 1
    lesz.</p>

    
    <h3>str_ieq</h3>
    
    <ul>
      <li><span lang="en">Input(s):</span>
	<span lang="hu">Bemenet(ek):</span>
	<span lang="en">R0=string1, R1=string2</span>
	<span lang="hu">R0=sztring1, R1=sztring2</span>
      </li>
      <li><span lang="en">Output(s):</span>
	<span lang="hu">Kimenet(ek):</span>
	<span lang="en">Flag.C=1 if equal</span>
	<span lang="hu">Flag.C=1 ha megegyeznek</span>
      </li>
    </ul>

    <p>Két sztring összehasonlítása, a kis- és a nagybetűk
    megegyezőnek számítanak. Egyezés esetén a flag regiszter C bitje 1
    lesz.</p>

    
    <h3>str_len</h3>
    
    <ul>
      <li><span lang="en">Input(s):</span>
	<span lang="hu">Bemenet(ek):</span>
	<span lang="en">R0=string</span>
	<span lang="hu">R0=sztring</span>
      </li>
      <li><span lang="en">Output(s):</span>
	<span lang="hu">Kimenet(ek):</span>
	<span lang="en">R4=chars in string</span>
	<span lang="hu">R4=karakterek száma</span>
      </li>
    </ul>

    <p>String hosszának meghatározása. A függvény a sztringben lévő
    karakterek számát adja.</p>

    
    <h3>str_size</h3>
    
    <ul>
      <li><span lang="en">Input(s):</span>
	<span lang="hu">Bemenet(ek):</span>
	<span lang="en">R0=string</span>
	<span lang="hu">R0=sztring</span>
      </li>
      <li><span lang="en">Output(s):</span>
	<span lang="hu">Kimenet(ek):</span>
	<span lang="en">R4=words in memory</span>
	<span lang="hu">R4=memória szavak száma</span>
      </li>
    </ul>

    <p>A függvény egy sztring által elfoglalt memória hely méretét
    adja meg, beleértve a sztringet záró 0 értékű szót is.</p>


    <h3>str_getchar</h3>

    <ul>
      <li><spanlang="en">Input(s):</span>
	<span lang="hu">Bemenet(ek):</span>
	<span lang="en">R0=string, R1=index</span>
	<span lang="hu">R0=sztring, R1=index</span>
      </li>
      <li><span lang="en">Output(s):</span>
	<span lang="hu">Kimenet(ek):</span>
	<span lang="en">R4=char in string at index</span>
	<span lang="hu">R4=a sztring indexedik karaktere</span>
      </li>
    </ul>

    <p>A függvény normál/pakolt formájú sztringnek egy adott sorszámú
    karakterét adja, az első karakter sorszáma 0. Ha a sorszám
    nagyobb, mint a sztring hossza, akkor 0 lesz az eredmény.</p>

    
    <h3>str_setchar</h3>

    <ul>
      <li><spanlang="en">Input(s):</span>
	<span lang="hu">Bemenet(ek):</span>
	<span lang="en">R0=string, R1=index, R2=char</span>
	<span lang="hu">R0=sztring, R1=index, R2=karakter</span>
      </li>
      <li><span lang="en">Output(s):</span>
	<span lang="hu">Kimenet(ek):</span>
	<span lang="en">-</span>
	<span lang="hu">-</span>
      </li>
    </ul>

    <p>A függvény normál/pakolt formájú sztringnek egy adott sorszámú
    (első karakter sorszáma 0) karakterét lecseréli a megadott
    karakterre. Ha a sorszám nagyobb a sztring hosszánál, akkor nem
    történik módosítás.
    </p>

    
    <h3>str_packed</h3>

    <ul>
      <li><spanlang="en">Input(s):</span>
	<span lang="hu">Bemenet(ek):</span>
	<span lang="en">R0=string</span>
	<span lang="hu">R0=sztring</span>
      </li>
      <li><span lang="en">Output(s):</span>
	<span lang="hu">Kimenet(ek):</span>
	<span lang="en">F.C=1 if string is packed</span>
	<span lang="hu">F.C=1 ha a sztring pakolt</span>
      </li>
    </ul>

    <p>A függvény megvizsgálja, hogy a paraméterül megadott helyen
    kezdődő sztring pakolt formátumú-e, ha igen, a C flag 1 lesz. Az
    üres sztring nem pakolt formátumú.
    </p>

    
    <h2>
      <span lang="en">Arithmetic functions</span>
      <span lang="hu">Aritmetikai függvények</span>
    </h2>


    <h3>div</h3>

    <ul>
      <li><span lang="en">Input(s):</span>
	<span lang="hu">Bemenet(ek):</span>
	<span lang="en">R0=number, R1=divisor</span>
	<span lang="hu">R0=osztandó, R1=osztó</span>
      </li>
      <li><span lang="en">Output(s):</span>
	<span lang="hu">Kimenet(ek):</span>
	<span lang="en">R4=quotient, R5=reminder</span>
	<span lang="hu">R4=eredmény, R5=maradék</span>
      </li>
    </ul>

    <p>Előjel nélküli egész számok osztása: R2= R0/R1. Az osztó (R1)
    nem lehet 0. Az osztás maradéka az R3 regiszterbe kerül.</p>


    <h3>rand</h3>

    <ul>
      <li><span lang="en">Input(s):</span>
	<span lang="hu">Bemenet(ek):</span>
	<span lang="en">-</span>
	<span lang="hu">-</span>
      </li>
      <li><span lang="en">Output(s):</span>
	<span lang="hu">Kimenet(ek):</span>
	<span lang="en">R4=next random number</span>
	<span lang="hu">R4=következő véletlen szám</span>
      </li>
    </ul>

    <p>32 bites, előjel nélküli véletlen szám generálása.</p>


    <h3>rand_max</h3>

    <ul>
      <li><span lang="en">Input(s):</span>
	<span lang="hu">Bemenet(ek):</span>
	<span lang="en">R0=max value</span>
	<span lang="hu">R0=maximum</span>
      </li>
      <li><span lang="en">Output(s):</span>
	<span lang="hu">Kimenet(ek):</span>
	<span lang="en">R4=next random number</span>
	<span lang="hu">R4=következő véletlen szám</span>
      </li>
    </ul>

    <p>32 bites, előjel nélküli véletlen szám generálása, amely a
    0 és a maximum (paraméter) értékhatárok közé esik.</p>


    <h3>srand</h3>

    <ul>
      <li><span lang="en">Input(s):</span>
	<span lang="hu">Bemenet(ek):</span>
	<span lang="en">R0=seed</span>
	<span lang="hu">R0=aktuális véletlen szám</span>
      </li>
      <li><span lang="en">Output(s):</span>
	<span lang="hu">Kimenet(ek):</span>
	<span lang="en">-</span>
	<span lang="hu">-</span>
      </li>
    </ul>

    <p>A véletlen szám generátor aktuális értékének beállítása. A
    következő rand hívás a véletlen szekvencia következő értékét fogja
    adni.</p>

    
    <h2>
      <span lang="en">Board specific functions</span>
      <span lang="hu">Kártya kezelő függvények</span>
    </h2>


    <h3>pressed</h3>

    <ul>
      <li><span lang="en">Input(s):</span>
	<span lang="hu">Bemenet(ek):</span>
	<span lang="en">R0=bitmask of button</span>
	<span lang="hu">R0=nyomógomb bitmaszkja</span>
      </li>
      <li><span lang="en">Output(s):</span>
	<span lang="hu">Kimenet(ek):</span>
	<span lang="en">Flag.C=1 if pressed</span>
	<span lang="hu">Flag.C=1 ha megnyomták</span>
      </li>
    </ul>

    <p>Nyomógomb megnyomásának vizsgálata. A függvény a gomb
    megnyomásának detektálása után egy meghíváskor fog megnyomott
    értéket adni.</p>
    

    <h3>switched</h3>
    
    <ul>
      <li><span lang="en">Input(s):</span>
	<span lang="hu">Bemenet(ek):</span>
	<span lang="en">R0=bitmask of switch</span>
	<span lang="hu">R0=kapcsoló bitmaszkja</span>
      </li>
      <li><span lang="en">Output(s):</span>
	<span lang="hu">Kimenet(ek):</span>
	<span lang="en">Flag.C=1 if switch turned on</span>
	<span lang="hu">Flag.C=1 ha a kapcsolót bekapcsolták</span>
      </li>
    </ul>

    <p>Kapcsoló bekapcsolásának vizsgálata.A függvény a kapcsoló
      bekapcsolásának detektálása után egy meghíváskor fog bekapcsolt
      értéket adni.</p>


    <h3>restart_button</h3>

    <ul>
      <li><span lang="en">Input(s):</span>
	<span lang="hu">Bemenet(ek):</span>
	<span lang="en">-</span>
	<span lang="hu">-</span>
      </li>
      <li><span lang="en">Output(s):</span>
	<span lang="hu">Kimenet(ek):</span>
	<span lang="en">-</span>
	<span lang="hu">-</span>
      </li>
    </ul>

    <p>A nyomógombok állapotának megváltozását detektáló algoritmus
    alaphelyzetbe állítása.</p>


    <h3>restart_switch</h3>

    <ul>
      <li><span lang="en">Input(s):</span>
	<span lang="hu">Bemenet(ek):</span>
	<span lang="en">-</span>
	<span lang="hu">-</span>
      </li>
      <li><span lang="en">Output(s):</span>
	<span lang="hu">Kimenet(ek):</span>
	<span lang="en">-</span>
	<span lang="hu">-</span>
      </li>
    </ul>

    <p>A kapcsolók állapotának megváltozását detektáló algoritmus
      alaphelyzetbe állítása.</p>

    
    <hr>
  </body>
</html>
