<!DOCTYPE html>
<html id="html-tag" lang="en">
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <script>
    function setCookie(name, value) {
	let date = new Date();
	 // Calculate expiration date
	date.setTime(date.getTime() + (/*days:*/1000 * 24 * 60 * 60 * 1000));
	let expires = "expires=" + date.toUTCString();
	 // Set the cookie
	document.cookie = name + "=" + value + ";" + expires + ";path=/";
    }
    function getCookie(name) {
	let cookieName = name + "=";
	 // Decode the cookie string
	let decodedCookie = decodeURIComponent(document.cookie);
	let ca = decodedCookie.split(';');
	for(let i = 0; i <ca.length; i++) {
	    let c = ca[i];
	    while (c.charAt(0) == ' ') {
		c = c.substring(1);
	    }
	    if (c.indexOf(cookieName) == 0) {
		return c.substring(cookieName.length, c.length);
	    }
	}
	return ""; // Return empty string if cookie not found
    }
    let $htmlTag = document.querySelector("#html-tag")
    let urlParams = new URL(window.location.toLocaleString()).searchParams;
    let url_lang= urlParams.get('lang');
    let coo_lang= getCookie("p12dev_lang");
    let lvar= "";
    function set_lang()
    {
	if (url_lang!=null)
	    lvar= url_lang;
	else
    	    lvar= coo_lang;
	switch(lvar) {
	case "hu": {
	    $htmlTag.lang = "hu";
	    $htmlTag.classList.add("hungarianLang");
	    setCookie("p12dev_lang", "hu");
	    break;
	}
	default: {
	    $htmlTag.classList.add("englishLang");
	    setCookie("p12dev_lang", "en");
	    break;
	}
	}
    }
    set_lang();
  </script>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <link rel="stylesheet" href="p12.css">
    <title>p2223 library: output functions</title>
  </head>
  
  <body>

    <p>
      <a href="index.html">Index</a>
      |
    <a href="devenv.html"><span lang="hu">Fejlesztés</span>
      <span lang="en">Development</span></a>
    |
    <a href="p2223.html">CPU</a>
    |
    <a href="computer_v2.html"><span lang="hu">Számítógép</span>
      <span lang="en">Computer</span></a>
    |
    <a href="asm.html">Assembler</a>
    |
    <a href="pmon.html">Monitor</a>
    |
    <a href="lib.html"><span lang="hu">Függvények</span>
      <span lang="en">Library</span></a>
    </p>

    <hr>

    <a href="lib_out.html"><span lang="hu">Kimenet</span>
      <span lang="en">Output</span></a>
    |
    <a href="lib_in.html"><span lang="en">Input</span>
      <span lang="hu">Bemenet</span></a>
    |
    <a href="lib_char.html"><span lang="hu">Karakter</span>
      <span lang="en">Character</span></a>
    |
    <a href="lib_str.html"><span lang="hu">Sztring</span>
      <span lang="en">String</span></a>
    |
    <a href="lib_math.html"><span lang="hu">Matematika</span>
      <span lang="en">Math</span></a>
    |
    <a href="lib_bsp.html"><span lang="hu">Kártya</span>
      <span lang="en">Board</span></a>
    |
    <a href="lib_sys.html"><span lang="hu">Rendszer</span>
      <span lang="en">System</span></a>
    |
    <a href="lib_std.html"><span lang="hu">Egyéb</span>
      <span lang="en">Standard</span></a>
    |
    <a href="lib_term.html"><span lang="hu">Terminál</span>
      <span lang="en">Terminal</span></a>

    <hr>
    

    <span lang="hu">Lang:</span> <span lang="en">Nyelv:</span>
    <a href="lib_out.html?lang=hu">HU</a>
    <a href="lib_out.html?lang=en">EN</a>

    <h1>
      <span lang="en">Output functions</span>
      <span lang="hu">Kimeneti függvények</span>
    </h1>

    
    <a name="putchar"><h3>putchar</h3></a>

    <ul>
      <li><span lang="en">Input(s):</span>
	<span lang="hu">Bemenet(ek):</span>
	<span lang="en">R0 character</span>
	<span lang="hu">R0 karakter</span>
      </li>
      <li><span lang="en">Output(s):</span>
	<span lang="hu">Kimenet(ek):</span>
	-
      </li>
    </ul>
    
    <p>
      <span lang="hu">A bemenetként megadott karakterkód kiírása az
      UART periférián keresztül a terminálra. A függvény először
      megvárja az előzőleg kiírt karakter kiküldését.</span>

      <span lang="en">Writes the character code given as input to the
      terminal via the UART peripheral. The function first waits for
      the previously written character to be sent.</span>
    </p>


    <a name="prints"><h3>prints</h3></a>

    <ul>
      <li><span lang="en">Input(s):</span>
	<span lang="hu">Bemenet(ek):</span>
	<span lang="en">R0 address of string</span>
	<span lang="hu">R0 sztring kezdőcíme</span>
      </li>
      <li><span lang="en">Output(s):</span>
	<span lang="hu">Kimenet(ek):</span>
	-
      </li>
    </ul>

    <p>
      <span lang="hu">Szöveg (0 végződésű karaktersorozat) kiírása a
      terminálra.</span>

      <span lang="en">Write text (string of characters ending in 0) to
      the terminal.</span>
    </p>


    <a name="printsnl"><h3>printsnl</h3></a>

    <ul>
      <li><span lang="en">Input(s):</span>
	<span lang="hu">Bemenet(ek):</span>
	<span lang="en">R0 address of string</span>
	<span lang="hu">R0 sztring kezdőcíme</span>
      </li>
      <li><span lang="en">Output(s):</span>
	<span lang="hu">Kimenet(ek):</span>
	<span lang="en">-</span>
	<span lang="hu">-</span>
	</li>
    </ul>

    <p>
      <span lang="hu">Szöveg (0 végződésű karaktersorozat) kiírása a
      terminálra, ezután a függvény kiír egy soremelés
      karaktert.</span>

      <span lang="en">Write text (a string of characters ending in 0)
      to the terminal, then the function prints a newline
      character.</span>
    </p>

    
    <a name="printh"><h3>printh</h3></a>

    <ul>
      <li><span lang="en">Input(s):</span>
	<span lang="hu">Bemenet(ek):</span>
	<span lang="en">R0 value;
	  <br>R1 nr of chars between separators (_)</span>
	<span lang="hu">R0 számérték;
	  <br>R1 az elválasztó (_) közötti karakterek száma</span>
      </li>
      <li><span lang="en">Output(s):</span>
	<span lang="hu">Kimenet(ek):</span>
	<span lang="en">-</span>
	<span lang="hu">-</span>
	</li>
    </ul>

    <p>
      <span lang="hu">Kiírja a bemeneti 32 bites bináris egész szám
      értékét a terminálra hexadecimális számrendszerben, 8
      karakteren, bevezető nullákkal. Az R1-ben megadott számú
      karakterenként egy _ elválasztó jelet is kiír.</span>

      <span lang="en">Prints the value of the input 32-bit binary
      integer to the terminal in hexadecimal, 8 characters, with
      leading zeros. It also prints a _ separator after every number
      of characters specified in R1.</span>
    </p>

    
    <a name="printd"><h3>printd</h3></a>

    <ul>
      <li><span lang="en">Input(s):</span>
	<span lang="hu">Bemenet(ek):</span>
	<span lang="en">R0 value</span>
	<span lang="hu">R0 érték</span>
      </li>
      <li><span lang="en">Output(s):</span>
	<span lang="hu">Kimenet(ek):</span>
	<span lang="en">-</span>
	<span lang="hu">-</span>
	</li>
    </ul>

    <p>
      <span lang="hu">A bemenetként megadott 32 bites (pozitív)
      bináris számot kiírja a terminálra tízes számrendszerben.</span>

      <span lang="en">The 32-bit (positive) binary number given as
      input is printed to the terminal in decimal.</span>
    </p>

    
    <a name="eprints"><h3>eprints</h3></a>

    <ul>
      <li><span lang="en">Input(s):</span>
	<span lang="hu">Bemenet(ek):</span>
	<span lang="en">-</span>
	<span lang="hu">-</span>
      </li>
      <li><span lang="en">Output(s):</span>
	<span lang="hu">Kimenet(ek):</span>
	<span lang="en">-</span>
	<span lang="hu">-</span>
	</li>
    </ul>

    <p>
      <span lang="hu">Beágyazott, 0 végződésű karaktertömb kiírása a
      terminálra. A sztringnek a program kódjában közvetlenül a
      szubrutint
      meghívó <a href="p2223.html#CALL">CALL</a>/<a href="p2223.html#CES">CES</a>
      utasítás után kell lennie. A szubrutin a sztring záró nullája
      utáni címre fog visszatérni. Escape szekvenciák (formázó
      karakterek) nem használhatók. A funkciónak sem bemeneti, sem
      kimeneti paraméterei nincsenek. Helyes használatára egy
      példa:</span>

      <span lang="en">Writes a nested, 0-terminated character array to
      the terminal. The string must be in the program code immediately
      after
      the <a href="p2223.html#CALL">CALL</a>/<a href="p2223.html#CES">CES</a>
      statement that calls the subroutine. The subroutine will return
      to the address after the trailing zero of the string. Escape
      sequences (formatting characters) cannot be used. The function
      has neither input nor output parameters. Here is an example of
      its correct usage:</span>
    </p>

    <samp>
        nop

        ces     eprints
        db      ”Hello World!\n”
        mvzl    r0,12
        ...
    </samp>

    <p>
      <span lang="hu">A <a href="p2223.html#CALL">CALL</a> utasítás
	helyett ebben az esetben használható
	a <a href="p2223.html#CES">CES</a> utasítás is.</span>

      <span lang="en">Instead of
      the <a href="p2223.html#CALL">CALL</a> instruction,
      the <a href="p2223.html#CES">CES</a> instruction can also be
      used in this case.</span>
    </p>
    
    
    <a name="printf"><h3>printf</h3></a>

    <ul>
      <li><span lang="en">Input(s): R0 address of format string
	<br>R1..R12 parameter values</span>
	<span lang="hu">Bemenet(ek): R0 formázó szöveg címe
	<br>R1..R12 paraméterek értékei</span>
	<span lang="en"></span>
	<span lang="hu"></span>
      </li>
      <li><span lang="en">Output(s):</span>
	<span lang="hu">Kimenet(ek):</span>
	<span lang="en">-</span>
	<span lang="hu">-</span>
      </li>
    </ul>

    <p>
      <span lang="hu">Formázott szöveg kiírása a terminálra. A
      szövegben elhelyezhetők formázó utasítások (% jellel kezdve),
      amelyek egy adat megfelelő formátumban való kiírását
      eredményezik. Az adatokat az R1..R12 regiszterekben adhatjuk át,
      amelyekből sorban annyit használ fel a szubrutin, amennyi
      formázó utasítás van a szövegben.</span>

      <span lang="en">Print formatted string to the
      terminal. Formatting instructions (starting with the % sign) can
      be placed in the string, which result in the printing of a data
      in the appropriate format. The data can be transferred in the
      registers R1..R12, of which the subroutine uses as many of the
      formatting instructions in the text.</span>
    </p>

    <p>
      <span lang="hu">A szubrutin által kezelt formázó utasítások a
      következők:</span>

      <span lang="en">The formatting instructions handled by the
      subroutine are:</span>
    </p>

    <table border=1>
      <tr>
	<th><span lang="hu">Utasítás</span>
	  <span lang="en">Instruction</span></th>
	<th><span lang="hu">Formátum</span>
	  <span lang="en">Format</span></th>
	<th><span lang="hu">Példa, megjegyzés</span>
	  <span lang="en">Example, note</span></th>
      </tr>
      <tr><td>%%</td>
	<td><span lang="hu">Százalékjel</span>
	  <span lang="en">Percent sign</span></td>
	<td>%</td></tr>
      <tr><td>%u</td>
	<td><span lang="hu">Előjel nélküli decimális</span>
	  <span lang="en">Unsigned decimal</span></td>
	<td>12345</td></tr>
      <tr><td>%d</td>
	<td><span lang="hu">Előjeles decimális</span>
	  <span lang="en">Signed decimal</span></td>
	<td>-12345</td></tr>
      <tr><td>%x</td>
	<td><span lang="hu">32 bites hexadecimális</span>
	  <span lang="en">32 bit hexadecimal</span></td>
	<td>1a2b3c5d</td></tr>
      <tr><td>%b</td>
	<td><span lang="hu">32 bites bináris</span>
	  <span lang="en">32 bit binary</span></td>
	<td>00010010001101000101011001111000</td></tr>
      <tr><td>%p</td>
	<td><span lang="hu">32 bites pointer</span>
	  <span lang="en">32 bit pointer</span></td>
	<td>02AB_CD78</td></tr>
      <tr><td>%s</td>
	<td><span lang="hu">Szöveg</span>
	  <span lang="en">String</span></td>
	<td><span lang="hu">az adat regiszternek a beillesztendő
	    (normál, vagy pakolt) szöveg címét kell tartalmaznia</span>
	  <span lang="en">the data register must contain the address
          of the string to be inserted (normal or packed)</span>
      </td></tr>
      <tr><td>%c</td>
	<td><span lang="hu">Karakter</span>
	  <span lang="en">Character</span></td>
	<td><span lang="hu">az adat regiszterben lévő ASCII kódot írja
	    ki</span>
	  <span lang="en">prints the ASCII code in the data
	  register</span>
      </td></tr>
    </table>

    <p>
      <span lang="hu">A % jel és a formázó utasítás között lehetnek
	paraméterek, amelyek befolyásolhatják a kiírás
	jellemzőit.</span>

      <span lang="en">There may be parameters between the % sign and
      the formatting statement that can affect the characteristics of
      the output.</span>
    </p>

    
    <a name="printf_width"><h4>
	<span lang="hu"><b>szám</b></span>
	<span lang="en"><b>number</b></span>
    </h4></a>

    <p>
      <span lang="hu">Mező szélesség</span>

      <span lang="en">Field width</span>
    </p>
    
    <p>
      <span lang="hu">A paraméternek 0-tól eltérő számjeggyel kezdődő
      decimális számnak kell lennie. A formázó utasítás által kiírt
      szöveg által elfoglalt karakterhelyek számát adja meg. A %d, %u
      esetén a szám akkor is kiíródik, ha ennél hosszabb. %x, %b
      esetén a hosszabb szövegek balról csonkolódnak, tehát csak a
      megadott számú alsó helyiértékek karakterei íródnak ki.</span>

      <span lang="en">The parameter must be a decimal number starting
      with a digit other than 0. It specifies the number of character
      positions occupied by the text printed by the formatting
      instruction. In the case of %d, %u, the number is printed even
      if it is longer. In the case of %x, %b, longer texts are
      truncated from the left, so only the characters of the specified
      number of lower part ​​are printed.</span>
    </p>

    <samp>
%d       "10000"
%15d     "          10000"
%u       "4294967196"
%5u      "4294967196"
%15u     "     4294967196"
%x       "3e8"
%5x      "003e8"
%15x     "            3e8"
%2x      "e8"
%b       "00010010001101000101011001111000"
%34b     "  00010010001101000101011001111000"
%9b      "001111000"
    </samp>

    
    <a name="printf_left"><h4><b>-</b></h4></a>

    <p>
      <span lang="hu">Balra igazítás</span>

      <span lang="en">Left align</span>
    </p>
    
    <p>
      <span lang="hu">Akkor van hatása, ha megadjuk a kiíráshoz a mező
      szélességet, és a szélesség nagyobb, mint a behelyettesített
      szöveg hossza. Ebben az esetben a kiírás a mező bal széléhez
      lesz igazítva, a jobb szél helyett.</span>

      <span lang="en">It has an effect if we specify the field width
      for the output, and the width is greater than the length of the
      resulting text. In this case, the output will be aligned to the
      left side of the field, instead of the right side.</span>
    </p>
      
    <samp>
%20s   "         HelloWorld!"
%-20s  "HelloWorld!         "
%5u    "4294967196"
%15u   "     4294967196"
%-15u  "4294967196     "
%5d    "10000"
%15d   "          10000"
%-15d  "10000          "
%5x    "003e8"
%15x   "            3e8"
%-15x  "3e8            "
%5bb   "11000"
%34b   "  00010010001101000101011001111000"
%-34b  "00010010001101000101011001111000  "
  </samp>


    <a name="printf_sign"><h4><b>+</b></h4></a>

    <p>
      <span lang="hu">Előjel</span>

      <span lang="hu">Show sign</span>
    </p>

    <p>
      <span lang="hu">Csak a %d formátum esetében van hatása. Ha
	megadjuk, akkor a pozitív számok előjele is kiíródik.</span>

      <span lang="en">Only has an effect for the %d format. If it is
      specified, the sign of positive numbers is also printed.</span>
    </p>

    <samp>
%d       "10000"
%+d      "+10000"
%-+15d   "+10000         "
    </samp>


    <a name="printf_zero"><h4><b>0</b></h4></a>

    <p>
      <span lang="hu">Balról kitöltés 0-val</span>

      <span lang="en">Fill left side with 0</span>
    </p>

    <p>
      <span lang="hu">Szám típusú formátumok (%u, %d, %x, %b) esetén
      van hatása akkor, ha a szám előjele nem jelenik meg, meg van
      adva a mező szélesség és ez nagyobb mint a szöveg hossza. Ekkor
      a megadott mezőhossz balról 0 karakterekkel lesz
      feltöltve.</span>

      <span lang="en">For number type formats (%u, %d, %x, %b), it has
      an effect if the number sign is not displayed, the field width
      is specified and it is greater than the length of the text. In
      this case, the specified field length will be filled with 0
      characters from the left.</span>
    </p>

    <samp>
%015u    "000004294967196"
%015d    "000000000010000"
%0+15d   "         +10000"
%015d    "          -1000"
%015x    "0000000000003e8"
%034b    "0000010010001101000101011001111000"
    </samp>
    
    
    <a name="eprintf"><h3>eprintf</h3></a>

    <ul>
      <li><span lang="en">Input(s): R1..R12 parameter values</span>
	<span lang="hu">Bemenet(ek): R1..R12 paraméter értékek</span>
	<span lang="en"></span>
	<span lang="hu"></span>
      </li>
      <li><span lang="en">Output(s):</span>
	<span lang="hu">Kimenet(ek):</span>
	<span lang="en">-</span>
	<span lang="hu">-</span>
      </li>
    </ul>

    <p>
      <span lang="hu">Beágyazott, 0 végződésű formázó szöveg kiírása a
	terminálra. A formázó szövegnek közvetlenül
	a <a href="p2223.html#CALL">CALL</a>
	(vagy <a href="p2223.html#CES">CES</a>) utasítás után kell
	lennie, a további paraméterek a <a href="#printf">printf</a>
	szubrutinéval egyeznek, azonban ez a funkció az R0
	regiszterben nem vár bemenő adatot.</span>
      
      <span lang="en">Prints embedded, 0-terminated formatting text to
      the terminal. The formatting text must be placed immediately
      after the <a href="p2223.html#CALL">CALL</a>
      (or <a href="p2223.html#CES">CES</a>) instruction, the
      additional parameters are the same as those of
      the <a href="#printf">printf</a> subroutine, but this function
      does not require input data in the R0 register.</span>
    </p>

    <samp>
UART_CPB = 0xff44

        ld      r1,UART_CPB
        mov     r2,r1
        ces     eprintf
        db      ”Uart cpb= %d (0x%x)\n”
        nop
        ...
    </samp>


    <hr>
  </body>
</html>
