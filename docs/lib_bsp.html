<!DOCTYPE html>
<html id="html-tag" lang="en">
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <script>
    function setCookie(name, value) {
	let date = new Date();
	 // Calculate expiration date
	date.setTime(date.getTime() + (/*days:*/1000 * 24 * 60 * 60 * 1000));
	let expires = "expires=" + date.toUTCString();
	 // Set the cookie
	document.cookie = name + "=" + value + ";" + expires + ";path=/";
    }
    function getCookie(name) {
	let cookieName = name + "=";
	 // Decode the cookie string
	let decodedCookie = decodeURIComponent(document.cookie);
	let ca = decodedCookie.split(';');
	for(let i = 0; i <ca.length; i++) {
	    let c = ca[i];
	    while (c.charAt(0) == ' ') {
		c = c.substring(1);
	    }
	    if (c.indexOf(cookieName) == 0) {
		return c.substring(cookieName.length, c.length);
	    }
	}
	return ""; // Return empty string if cookie not found
    }
    let $htmlTag = document.querySelector("#html-tag")
    let urlParams = new URL(window.location.toLocaleString()).searchParams;
    let url_lang= urlParams.get('lang');
    let coo_lang= getCookie("p12dev_lang");
    let lvar= "";
    function set_lang()
    {
	if (url_lang!=null)
	    lvar= url_lang;
	else
    	    lvar= coo_lang;
	switch(lvar) {
	case "hu": {
	    $htmlTag.lang = "hu";
	    $htmlTag.classList.add("hungarianLang");
	    setCookie("p12dev_lang", "hu");
	    break;
	}
	default: {
	    $htmlTag.classList.add("englishLang");
	    setCookie("p12dev_lang", "en");
	    break;
	}
	}
    }
    set_lang();
  </script>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <link rel="stylesheet" href="p12.css">
    <title>p2223 library: board support procedures</title>
  </head>
  
  <body>

    <p>
      <a href="index.html">Index</a>
      |
    <a href="devenv.html"><span lang="hu">Fejlesztés</span>
      <span lang="en">Development</span></a>
    |
    <a href="p2223.html">CPU</a>
    |
    <a href="computer_v2.html"><span lang="hu">Számítógép</span>
      <span lang="en">Computer</span></a>
    |
    <a href="asm.html">Assembler</a>
    |
    <a href="pmon.html">Monitor</a>
    |
    <a href="lib.html"><span lang="hu">Függvények</span>
      <span lang="en">Library</span></a>
    </p>

    <hr>

    <a href="lib_out.html"><span lang="hu">Kimenet</span>
      <span lang="en">Output</span></a>
    |
    <a href="lib_in.html"><span lang="en">Input</span>
      <span lang="hu">Bemenet</span></a>
    |
    <a href="lib_char.html"><span lang="hu">Karakter</span>
      <span lang="en">Character</span></a>
    |
    <a href="lib_str.html"><span lang="hu">Sztring</span>
      <span lang="en">String</span></a>
    |
    <a href="lib_math.html"><span lang="hu">Matematika</span>
      <span lang="en">Math</span></a>
    |
    <a href="lib_bsp.html"><span lang="hu">Kártya</span>
      <span lang="en">Board</span></a>
    |
    <a href="lib_sys.html"><span lang="hu">Rendszer</span>
      <span lang="en">System</span></a>
    |
    <a href="lib_std.html"><span lang="hu">Egyéb</span>
      <span lang="en">Standard</span></a>
    |
    <a href="lib_term.html"><span lang="hu">Terminál</span>
      <span lang="en">Terminal</span></a>

    <hr>
    
    <p>
      <a href="#btn"><span lang="hu">Nyomógomb</span>
	<span lang="en">Pushbutton</span></a>
      |
      <a href="#sw"><span lang="hu">Kapcsoló</span>
	<span lang="en">Switch</span></a>
      |
      <a href="#led"><span lang="hu">LED</span>
	<span lang="en">LED</span></a>
      |
      <a href="#dsp"><span lang="hu">Kijelző</span>
	<span lang="en">Display</span></a>
    </p>
    
    <hr>
    
    <span lang="hu">Lang:</span> <span lang="en">Nyelv:</span>
    <a href="lib_bsp.html?lang=hu">HU</a>
    <a href="lib_bsp.html?lang=en">EN</a>

    
    <h1>
      <span lang="en">Board support procedures</span>
      <span lang="hu">Kártya kezelő függvények</span>
    </h1>


    <a name="btn"></a>
    
    <a name="btn_posedge"><h3>btn_posedge</h3></a>

    <ul>
      <li><span lang="en">Input(s):</span>
	<span lang="hu">Bemenet(ek):</span>
	<span lang="en">R0=number of button (0-15)</span>
	<span lang="hu">R0=nyomógomb sorszáma (0-15)</span>
      </li>
      <li><span lang="en">Output(s):</span>
	<span lang="hu">Kimenet(ek):</span>
	<span lang="en">Flag.C=1 if pressed</span>
	<span lang="hu">Flag.C=1 ha megnyomták</span>
      </li>
    </ul>

    <p>
      <span lang="hu">Nyomógomb megnyomásának vizsgálata. A függvény a
      gomb megnyomásának detektálása után egy meghíváskor fog
      megnyomott értéket adni.</span>

      <span lang="en">Testing for button presses. The function will
      return a true value when called after detecting a button
      press.</span>
    </p>
    

    <a name="btn_negedge"><h3>btn_negedge</h3></a>

    <ul>
      <li><span lang="en">Input(s):</span>
	<span lang="hu">Bemenet(ek):</span>
	<span lang="en">R0=number of button (0-15)</span>
	<span lang="hu">R0=nyomógomb sorszáma (0-15)</span>
      </li>
      <li><span lang="en">Output(s):</span>
	<span lang="hu">Kimenet(ek):</span>
	<span lang="en">Flag.C=1 if released</span>
	<span lang="hu">Flag.C=1 ha elengedték</span>
      </li>
    </ul>

    <p>
      <span lang="hu">Nyomógomb elengedésének vizsgálata. A függvény a
      gomb elengedésének detektálása után egy meghíváskor fog igaz
      értéket értéket adni.</span>

      <span lang="en">Testing for button release. The function will
      return a true value when called after detecting the button
      release.</span>
    </p>
    

    <a name="btn_get"><h3>btn_get</h3></a>

    <ul>
      <li><span lang="en">Input(s):</span>
	<span lang="hu">Bemenet(ek):</span>
	<span lang="en">R0=number of button (0-15)</span>
	<span lang="hu">R0=nyomógomb sorszáma (0-15)</span>
      </li>
      <li><span lang="en">Output(s):</span>
	<span lang="hu">Kimenet(ek):</span>
	<span lang="en">Flag.C=1 if button is ON</span>
	<span lang="hu">Flag.C=1 ha nyomva van</span>
      </li>
    </ul>

    <p>
      <span lang="hu">Nyomógomb aktuális állapotának
      lekérdezése.</span>

      <span lang="en">Query the current state of a pushbutton.</span>
    </p>
    

    <a name="btn_restart"><h3>btn_restart</h3></a>

    <ul>
      <li><span lang="en">Input(s):</span>
	<span lang="hu">Bemenet(ek):</span>
	<span lang="en">-</span>
	<span lang="hu">-</span>
      </li>
      <li><span lang="en">Output(s):</span>
	<span lang="hu">Kimenet(ek):</span>
	<span lang="en">-</span>
	<span lang="hu">-</span>
      </li>
    </ul>

    <p>
      <span lang="hu">A nyomógombok állapotának megváltozását
	detektáló algoritmus alaphelyzetbe állítása.</span>

      <span lang="en">Reset the algorithm that detects changes in the
      state of pushbuttons.</span>
    </p>

    <hr>

    
    <a name="sw"></a>
    
    <a name="sw_posedge"><h3>sw_posedge</h3></a>
    
    <ul>
      <li><span lang="en">Input(s):</span>
	<span lang="hu">Bemenet(ek):</span>
	<span lang="en">R0=number of switch (0-15)</span>
	<span lang="hu">R0=kapcsoló sorszáma (0-15)</span>
      </li>
      <li><span lang="en">Output(s):</span>
	<span lang="hu">Kimenet(ek):</span>
	<span lang="en">Flag.C=1 if switch turned on</span>
	<span lang="hu">Flag.C=1 ha a kapcsolót bekapcsolták</span>
      </li>
    </ul>

    <p>
      <span lang="hu">Kapcsoló bekapcsolásának vizsgálata.A függvény a
      kapcsoló bekapcsolásának detektálása után egy meghíváskor fog
      bekapcsolt értéket adni.</span>

      <span lang="en">Checking whether a switch is on. The function
      will return true value when it is called after detecting that
      the switch is on.</span>
    </p>


    <a name="sw_negedge"><h3>sw_negedge</h3></a>
    
    <ul>
      <li><span lang="en">Input(s):</span>
	<span lang="hu">Bemenet(ek):</span>
	<span lang="en">R0=number of switch (0-15)</span>
	<span lang="hu">R0=kapcsoló sorszáma (0-15)</span>
      </li>
      <li><span lang="en">Output(s):</span>
	<span lang="hu">Kimenet(ek):</span>
	<span lang="en">Flag.C=1 if switch turned off</span>
	<span lang="hu">Flag.C=1 ha a kapcsolót kikapcsolták</span>
      </li>
    </ul>

    <p>
      <span lang="hu">Kapcsoló kikapcsolásának vizsgálata.A függvény a
      kapcsoló kikapcsolásának detektálása után egy meghíváskor fog
      kikapcsolt értéket adni.</span>

      <span lang="en">Testing for switch off. The function will return
      a value of off when it is called after detecting the switch
      off.</span>
    </p>


    <a name="sw_get"><h3>sw_get</h3></a>
    
    <ul>
      <li><span lang="en">Input(s):</span>
	<span lang="hu">Bemenet(ek):</span>
	<span lang="en">R0=number of switch (0-15)</span>
	<span lang="hu">R0=kapcsoló sorszáma (0-15)</span>
      </li>
      <li><span lang="en">Output(s):</span>
	<span lang="hu">Kimenet(ek):</span>
	<span lang="en">Flag.C=1 if switch is on</span>
	<span lang="hu">Flag.C=1 ha a kapcsoló fel van kapcsolva</span>
      </li>
    </ul>

    <p>
      <span lang="hu">Kapcsoló aktuális értékének lekérdezése.</span>

      <span lang="en">Query the current value of a switch.</span>
    </p>


    <a name="sw_restart"><h3>sw_restart</h3></a>

    <ul>
      <li><span lang="en">Input(s):</span>
	<span lang="hu">Bemenet(ek):</span>
	<span lang="en">-</span>
	<span lang="hu">-</span>
      </li>
      <li><span lang="en">Output(s):</span>
	<span lang="hu">Kimenet(ek):</span>
	<span lang="en">-</span>
	<span lang="hu">-</span>
      </li>
    </ul>

    <p>
      <span lang="hu">A kapcsolók állapotának megváltozását detektáló
	algoritmus alaphelyzetbe állítása.</span>

      <span lang="en">Resetting the algorithm that detects the change
      in the state of the switches.</span>
    </p>

    <hr>

    
    <a name="led"></a>
    
    <a name="led_on"><h3>led_on</h3></a>

    <ul>
      <li><span lang="en">Input(s):</span>
	<span lang="hu">Bemenet(ek):</span>
	<span lang="en">R0: number of LED (0-23)</span>
	<span lang="hu">R0: LED sorszáma (0-23)</span>
      </li>
      <li><span lang="en">Output(s):</span>
	<span lang="hu">Kimenet(ek):</span>
	<span lang="en">-</span>
	<span lang="hu">-</span>
      </li>
    </ul>

    <p>
      <span lang="hu">A megadott szorszámú LED-et
      bekapcsolja. A <a href="computer_v2.html#nexys4ddr">Nexys4DDR</a>
      és a <a href="computer_v2.html#boolean">Boolean</a> kártyákon
      csak 16 LED van. A <a href="computer_v2.html#logsys">LogSYS</a>
      kártyán a 0-7 sorszámú LED-ek zöldek, a 8-15 sorszámú LED-ek a
      0-7 címkéjű piros LED-ek, míg a 16-23 sorszámok a 0-7 címkéjű
      kék LED-ek.</span>

      <span lang="en">Turns on the LED with the specified label
      number. The <a href="computer_v2.html#nexys4ddr">Nexys4DDR</a>
      and <a href="computer_v2.html#boolean">Boolean</a> cards only
      have 16 LEDs. On
      the <a href="computer_v2.html#logsys">LogSYS</a> card, LEDs
      numbered 0-7 are green, LEDs numbered 8-15 are red LEDs labeled
      0-7, and LEDs numbered 16-23 are blue LEDs labeled 0-7.</span>
    </p>

    
    <a name="led_off"><h3>led_off</h3></a>

    <ul>
      <li><span lang="en">Input(s):</span>
	<span lang="hu">Bemenet(ek):</span>
	<span lang="en">R0: number of LED (0-23)</span>
	<span lang="hu">R0: LED sorszáma (0-23)</span>
      </li>
      <li><span lang="en">Output(s):</span>
	<span lang="hu">Kimenet(ek):</span>
	<span lang="en">-</span>
	<span lang="hu">-</span>
      </li>
    </ul>

    <p>
      <span lang="hu">A megadott szorszámú LED-et
      kikapcsolja. A <a href="computer_v2.html#logsys">LogSYS</a>
      kártyán a 0-7 sorszámú LED-ek zöldek, a 8-15 sorszámú LED-ek a
      0-7 címkéjű piros LED-ek, míg a 16-23 sorszámok a 0-7 címkéjű
      kék LED-ek.</span>

      <span lang="en">Turns off the LED with the specified label
      number. On the <a href="computer_v2.html#logsys">LogSYS</a>
      board, LEDs numbered 0-7 are green, LEDs numbered 8-15 are red
      LEDs labeled 0-7, and LEDs numbered 16-23 are blue LEDs labeled
      0-7.</span>
    </p>

    
    <a name="led_toggle"><h3>led_toggle</h3></a>

    <ul>
      <li><span lang="en">Input(s):</span>
	<span lang="hu">Bemenet(ek):</span>
	<span lang="en">R0: number of LED (0-23)</span>
	<span lang="hu">R0: LED sorszáma (0-23)</span>
      </li>
      <li><span lang="en">Output(s):</span>
	<span lang="hu">Kimenet(ek):</span>
	<span lang="en">-</span>
	<span lang="hu">-</span>
      </li>
    </ul>

    <p>
      <span lang="hu">A megadott szorszámú LED-et
      átkapcsolja. A <a href="computer_v2.html#logsys">LogSYS</a>
      kártyán a 0-7 sorszámú LED-ek zöldek, a 8-15 sorszámú LED-ek a
      0-7 címkéjű piros LED-ek, míg a 16-23 sorszámok a 0-7 címkéjű
      kék LED-ek.</span>

      <span lang="en">Toggles the LED with the specified label
      number. On the <a href="computer_v2.html#logsys">LogSYS</a>
      board, LEDs numbered 0-7 are green, LEDs numbered 8-15 are red
      LEDs labeled 0-7, while LEDs numbered 16-23 are blue LEDs
      labeled 0-7.</span>
    </p>

    
    <a name="led_set"><h3>led_set</h3></a>

    <ul>
      <li><span lang="en">Input(s):</span>
	<span lang="hu">Bemenet(ek):</span>
	<span lang="en">R0: number of LED (0-23), R1: value (bool)</span>
	<span lang="hu">R0: LED sorszáma (0-23), R1: érték (bool)</span>
      </li>
      <li><span lang="en">Output(s):</span>
	<span lang="hu">Kimenet(ek):</span>
	<span lang="en">-</span>
	<span lang="hu">-</span>
      </li>
    </ul>

    <p>
      <span lang="hu">A megadott szorszámú LED-et beállítja a megadott
      logikai érték alapján: IGAZ esetén bekapcsolja, HAMIS esetén
      kikapcsolja. A
      <a href="computer_v2.html#logsys">LogSYS</a> kártyán a 0-7
      sorszámú LED-ek zöldek, a 8-15 sorszámú LED-ek a 0-7 címkéjű
      piros LED-ek, míg a 16-23 sorszámok a 0-7 címkéjű kék
      LED-ek.</span>

      <span lang="en">Sets the LED with the specified label number
      based on the specified logical value: turns it on if TRUE, turns
      it off if FALSE. On the
      <a href="computer_v2.html#logsys">LogSYS</a> board, LEDs
      numbered 0-7 are green, LEDs numbered 8-15 are red LEDs labeled
      0-7, while LEDs numbered 16-23 are blue LEDs labeled 0-7.</span>
    </p>

    
    <a name="led_get"><h3>led_get</h3></a>

    <ul>
      <li><span lang="en">Input(s):</span>
	<span lang="hu">Bemenet(ek):</span>
	<span lang="en">R0: number of LED (0-23)</span>
	<span lang="hu">R0: LED sorszáma (0-23)</span>
      </li>
      <li><span lang="en">Output(s):</span>
	<span lang="hu">Kimenet(ek):</span>
	<span lang="en">Flag.C=1 if LED is ON</span>
	<span lang="hu">Flag.C=1 ha a LED bekapcsolt</span>
      </li>
    </ul>

    <p>
      <span lang="hu">A megadott szorszámú LED értéke alapján állítja
      be a C jelzőbitet: 1 lesz, ha a LED be van
      kapcsolva. A <a href="computer_v2.html#logsys">LogSYS</a>
      kártyán a 0-7 sorszámú LED-ek zöldek, a 8-15 sorszámú LED-ek a
      0-7 címkéjű piros LED-ek, míg a 16-23 sorszámok a 0-7 címkéjű
      kék LED-ek.</span>

      <span lang="en">Sets the C flag bit based on the value of the
      LED with the specified label number: it will be 1 if the LED is
      on. On the <a href="computer_v2.html#logsys">LogSYS</a> board,
      LEDs numbered 0-7 are green, LEDs numbered 8-15 are red LEDs
      labeled 0-7, while LEDs numbered 16-23 are blue LEDs labeled
      0-7.</span>
    </p>

    <hr>

    
    <a name="dsp"></a>
    
    <a name="dsp_ascii2seg"><h3>dsp_ascii2seg</h3></a>

    <ul>
      <li><span lang="en">Input(s):</span>
	<span lang="hu">Bemenet(ek):</span>
	<span lang="en">R0: char</span>
	<span lang="hu">R0: karakter</span>
      </li>
      <li><span lang="en">Output(s):</span>
	<span lang="hu">Kimenet(ek):</span>
	<span lang="en">R4: seven segment code</span>
	<span lang="hu">R4: hét szegmenses kód</span>
      </li>
    </ul>

    <p>
      <span lang="hu">Az R0 paraméterben megadott ascii karakter kódot
      átalakítja <a href="computer_v2.html#display">hét szegmenses
      kijelző</a> kóddá. A bemenetnek 0-127 között kell lennie.</span>

      <span lang="en">Converts the ASCII character code specified in
      the R0 parameter into
      a <a href="computer_v2.html#display">seven-segment display</a>
      code. The input must be between 0-127.</span>
    </p>

    <p>
      <span lang="hu">Amennyiben a karakter kisbetűs és nagybetűs
      változata közül csak az egyikhez adható meg szegmens kód, a
      függvény a másik változathoz is ezt a kódot adja majd. Például a
      'p' és a 'P' esetében egyaránt a P képét eredményező kódot
      kapunk.</span>

      <span lang="en">If a segment code can be specified for only one
      of the lowercase and uppercase versions of a character, the
      function will return the same code for the other version. For
      example, for both 'p' and 'P', we get a code that produces the
      image of P.</span>
    </p>

    <p>
      <span lang="hu">Amennyiben a karakter, írásjel nem jeleníthető
      meg olvasható módon a hét szegmenses kijelzőn, az eredmény 0
      lesz (sötét karakerkép).</span>

      <span lang="en">If the character or punctuation mark cannot be
      displayed legibly on the seven-segment display, the result will
      be 0 (dark character image).</span>
    </p>

    <p>
      <span lang="hu">A függvény a "tizedespont" LED-et nem használja
      a képek előállítására, így a '.' esetében is 0-t kapunk.</span>

      <span lang="en">The function does not use the "decimal point"
      LED to generate images, so we get 0 even for '.'.</span>
    </p>

    <p><a href="segchars.html">
	<span lang="hu">Kijelző képek</span>
	<span lang="en">Display images</span>
    </a></p>
    

    <a name="dsp_str2seg"><h3>dsp_str2seg</h3></a>

    <ul>
      <li><span lang="en">Input(s):</span>
	<span lang="hu">Bemenet(ek):</span>
	<span lang="en">R0: string, R1: buffer</span>
	<span lang="hu">R0: sztring, R1: buffer</span>
      </li>
      <li><span lang="en">Output(s):</span>
	<span lang="hu">Kimenet(ek):</span>
	-
      </li>
    </ul>

    <p>
      <span lang="hu">Egy normál/pakolt formátumú szöveg
      átalakítása <a href="computer_v2.html#display">hét szegmenses
      kijkelző</a> kódokra, pakolt formában. Amennyiben kimeneti
      buffer címeként az R1 regiszterben a PORTC kimeneti regiszterét
      adjuk meg (<a href="computer_v2.html#gpio">GPIOC.ODR</a>), úgy
      az eredmény a hét szegmenses kijelzőn megjelenik.</span>

      <span lang="en">Converting a normal/packed text
      into <a href="computer_v2.html#display">seven-segment
      display</a> codes, packed. If the output buffer address is the
      PORTC output register in the R1
      (<a href="computer_v2.html#gpio">GPIOC.ODR</a>), the result is
      displayed on the seven-segment display.</span>
    </p>

    <p>
      <span lang="hu">A függvény a kimeneti buffert nem ellenőrzi, a
	megfelelő méretű területről a hívás előtt kell
	gondoskodni.</span>

      <span lang="en">The function does not check the output buffer,
      the appropriate sized area must be provided before the
      call.</span>
    </p>

    <p>
      <span lang="hu">A függvény a szöveg hosszát nem ellenőrzi, ha
      bufferként a kimeneti port regisztereit használjuk, akkor a
      szöveg ne legyen 8 karakternél hosszabb!</span>

      <span lang="en">The function does not check the length of the
      string, if we use the registers of the output port as a buffer,
      then the string should not be longer than 8 characters!</span>
    </p>
      
    <hr>
  </body>
</html>
