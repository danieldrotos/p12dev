<!DOCTYPE html>
<html id="html-tag" lang="en">
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <script>
   const $htmlTag = document.querySelector("#html-tag")
   const urlParams = new URL(window.location.toLocaleString()).searchParams;
   var lvar= urlParams.get('lang');
   switch(lvar) {
     case "hu":
       $htmlTag.lang = "hu"
       $htmlTag.classList.add("hungarianLang")
       break
     default:
       lvar= "en";
       $htmlTag.classList.add("englishLang")
       break
   }
   function lnk(cath,fn)
    {
      var l= 'lib_' + cath + '.html#' + fn + '?lang=' + lvar;
      return l;
    }
  </script>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <link rel="stylesheet" href="p12.css">
    <title>p2223 library: board support procedures</title>
  </head>
  
  <body>

    <p>
    <a href="devenv.html"><span lang="hu">Fejlesztés</span>
      <span lang="en">Development</span></a>
    |
    <a href="p2223.html">CPU</a>
    |
    <a href="computer_v2.html"><span lang="hu">Számítógép</span>
      <span lang="en">Computer</span></a>
    |
    <a href="asm.html">Assembler</a>
    |
    <a href="pmon.html">Monitor</a>
    |
    <a href="lib.html"><span lang="hu">Függvények</span>
      <span lang="en">Library</span></a>
    </p>

    <hr>

    <a href="lib_out.html"><span lang="hu">Kimenet</span>
      <span lang="en">Output</span></a>
    |
    <a href="lib_in.html"><span lang="en">Input</span>
      <span lang="hu">Bemenet</span></a>
    |
    <a href="lib_char.html"><span lang="hu">Karakter</span>
      <span lang="en">Character</span></a>
    |
    <a href="lib_str.html"><span lang="hu">Sztring</span>
      <span lang="en">String</span></a>
    |
    <a href="lib_math.html"><span lang="hu">Matematika</span>
      <span lang="en">Math</span></a>
    |
    <a href="lib_bsp.html"><span lang="hu">Kártya</span>
      <span lang="en">Board</span></a>
    |
    <a href="lib_sys.html"><span lang="hu">Rendszer</span>
      <span lang="en">System</span></a>
    |
    <a href="lib_std.html"><span lang="hu">Egyéb</span>
      <span lang="en">Standard</span></a>
    |
    <a href="lib_term.html"><span lang="hu">Terminál</span>
      <span lang="en">Terminal</span></a>

    <hr>
    
    <p>
      <a href="#btn"><span lang="hu">Nyomógomb</span>
	<span lang="en">Pushbutton</span></a>
      |
      <a href="#sw"><span lang="hu">Kapcsoló</span>
	<span lang="en">Switch</span></a>
      |
      <a href="#led"><span lang="hu">LED</span>
	<span lang="en">LED</span></a>
      |
      <a href="#dsp"><span lang="hu">Kijelző</span>
	<span lang="en">Display</span></a>
    </p>
    
    <hr>
    
    <span lang="hu">Lang:</span> <span lang="en">Nyelv:</span>
    <a href="lib_bsp.html?lang=hu">HU</a>
    <a href="lib_bsp.html?lang=en">EN</a>

    
    <h1>
      <span lang="en">Board support procedures</span>
      <span lang="hu">Kártya kezelő függvények</span>
    </h1>


    <a name="btn"></a>
    
    <a name="btn_posedge"><h3>btn_posedge</h3></a>

    <ul>
      <li><span lang="en">Input(s):</span>
	<span lang="hu">Bemenet(ek):</span>
	<span lang="en">R0=number of button (0-15)</span>
	<span lang="hu">R0=nyomógomb sorszáma (0-15)</span>
      </li>
      <li><span lang="en">Output(s):</span>
	<span lang="hu">Kimenet(ek):</span>
	<span lang="en">Flag.C=1 if pressed</span>
	<span lang="hu">Flag.C=1 ha megnyomták</span>
      </li>
    </ul>

    <p>Nyomógomb megnyomásának vizsgálata. A függvény a gomb
    megnyomásának detektálása után egy meghíváskor fog megnyomott
    értéket adni.</p>
    

    <a name="btn_negedge"><h3>btn_negedge</h3></a>

    <ul>
      <li><span lang="en">Input(s):</span>
	<span lang="hu">Bemenet(ek):</span>
	<span lang="en">R0=number of button (0-15)</span>
	<span lang="hu">R0=nyomógomb sorszáma (0-15)</span>
      </li>
      <li><span lang="en">Output(s):</span>
	<span lang="hu">Kimenet(ek):</span>
	<span lang="en">Flag.C=1 if released</span>
	<span lang="hu">Flag.C=1 ha elengedték</span>
      </li>
    </ul>

    <p>Nyomógomb elengedésének vizsgálata. A függvény a gomb
    elengedésének detektálása után egy meghíváskor fog igaz értéket
    értéket adni.</p>
    

    <a name="btn_get"><h3>btn_get</h3></a>

    <ul>
      <li><span lang="en">Input(s):</span>
	<span lang="hu">Bemenet(ek):</span>
	<span lang="en">R0=number of button (0-15)</span>
	<span lang="hu">R0=nyomógomb sorszáma (0-15)</span>
      </li>
      <li><span lang="en">Output(s):</span>
	<span lang="hu">Kimenet(ek):</span>
	<span lang="en">Flag.C=1 if button is ON</span>
	<span lang="hu">Flag.C=1 ha nyomva van</span>
      </li>
    </ul>

    <p>Nyomógomb aktuális állapotának lekérdezése.</p>
    

    <a name="btn_restart"><h3>btn_restart</h3></a>

    <ul>
      <li><span lang="en">Input(s):</span>
	<span lang="hu">Bemenet(ek):</span>
	<span lang="en">-</span>
	<span lang="hu">-</span>
      </li>
      <li><span lang="en">Output(s):</span>
	<span lang="hu">Kimenet(ek):</span>
	<span lang="en">-</span>
	<span lang="hu">-</span>
      </li>
    </ul>

    <p>A nyomógombok állapotának megváltozását detektáló algoritmus
    alaphelyzetbe állítása.</p>

    <hr>

    
    <a name="sw"></a>
    
    <a name="sw_posedge"><h3>sw_posedge</h3></a>
    
    <ul>
      <li><span lang="en">Input(s):</span>
	<span lang="hu">Bemenet(ek):</span>
	<span lang="en">R0=number of switch (0-15)</span>
	<span lang="hu">R0=kapcsoló sorszáma (0-15)</span>
      </li>
      <li><span lang="en">Output(s):</span>
	<span lang="hu">Kimenet(ek):</span>
	<span lang="en">Flag.C=1 if switch turned on</span>
	<span lang="hu">Flag.C=1 ha a kapcsolót bekapcsolták</span>
      </li>
    </ul>

    <p>Kapcsoló bekapcsolásának vizsgálata.A függvény a kapcsoló
      bekapcsolásának detektálása után egy meghíváskor fog bekapcsolt
      értéket adni.</p>


    <a name="sw_negedge"><h3>sw_negedge</h3></a>
    
    <ul>
      <li><span lang="en">Input(s):</span>
	<span lang="hu">Bemenet(ek):</span>
	<span lang="en">R0=number of switch (0-15)</span>
	<span lang="hu">R0=kapcsoló sorszáma (0-15)</span>
      </li>
      <li><span lang="en">Output(s):</span>
	<span lang="hu">Kimenet(ek):</span>
	<span lang="en">Flag.C=1 if switch turned off</span>
	<span lang="hu">Flag.C=1 ha a kapcsolót kikapcsolták</span>
      </li>
    </ul>

    <p>Kapcsoló kikapcsolásának vizsgálata.A függvény a kapcsoló
      kikapcsolásának detektálása után egy meghíváskor fog kikapcsolt
      értéket adni.</p>


    <a name="sw_get"><h3>sw_get</h3></a>
    
    <ul>
      <li><span lang="en">Input(s):</span>
	<span lang="hu">Bemenet(ek):</span>
	<span lang="en">R0=number of switch (0-15)</span>
	<span lang="hu">R0=kapcsoló sorszáma (0-15)</span>
      </li>
      <li><span lang="en">Output(s):</span>
	<span lang="hu">Kimenet(ek):</span>
	<span lang="en">Flag.C=1 if switch is on</span>
	<span lang="hu">Flag.C=1 ha a kapcsoló fel van kapcsolva</span>
      </li>
    </ul>

    <p>Kapcsoló aktuális értékének lekérdezése.</p>


    <a name="sw_restart"><h3>sw_restart</h3></a>

    <ul>
      <li><span lang="en">Input(s):</span>
	<span lang="hu">Bemenet(ek):</span>
	<span lang="en">-</span>
	<span lang="hu">-</span>
      </li>
      <li><span lang="en">Output(s):</span>
	<span lang="hu">Kimenet(ek):</span>
	<span lang="en">-</span>
	<span lang="hu">-</span>
      </li>
    </ul>

    <p>A kapcsolók állapotának megváltozását detektáló algoritmus
      alaphelyzetbe állítása.</p>

    <hr>

    
    <a name="led"></a>
    
    <a name="led_on"><h3>led_on</h3></a>

    <ul>
      <li><span lang="en">Input(s):</span>
	<span lang="hu">Bemenet(ek):</span>
	<span lang="en">R0: number of LED (0-23)</span>
	<span lang="hu">R0: LED sorszáma (0-23)</span>
      </li>
      <li><span lang="en">Output(s):</span>
	<span lang="hu">Kimenet(ek):</span>
	<span lang="en">-</span>
	<span lang="hu">-</span>
      </li>
    </ul>

    <p>A megadott szorszámú LED-et
    bekapcsolja. A <a href="computer_v2.html#nexys4ddr">Nexys4DDR</a>
    és a <a href="computer_v2.html#boolean">Boolean</a> kártyákon csak
    16 LED van. A <a href="computer_v2.html#logsys">LogSYS</a> kártyán
    a 0-7 sorszámú LED-ek zöldek, a 8-15 sorszámú LED-ek a 0-7 címkéjű
    piros LED-ek, míg a 16-23 sorszámok a 0-7 címkéjű kék LED-ek.</p>

    
    <a name="led_off"><h3>led_off</h3></a>

    <ul>
      <li><span lang="en">Input(s):</span>
	<span lang="hu">Bemenet(ek):</span>
	<span lang="en">R0: number of LED (0-23)</span>
	<span lang="hu">R0: LED sorszáma (0-23)</span>
      </li>
      <li><span lang="en">Output(s):</span>
	<span lang="hu">Kimenet(ek):</span>
	<span lang="en">-</span>
	<span lang="hu">-</span>
      </li>
    </ul>

    <p>A megadott szorszámú LED-et
    kikapcsolja. A <a href="computer_v2.html#logsys">LogSYS</a>
    kártyán a 0-7 sorszámú LED-ek zöldek, a 8-15 sorszámú LED-ek a 0-7
    címkéjű piros LED-ek, míg a 16-23 sorszámok a 0-7 címkéjű kék
    LED-ek.</p>

    
    <a name="led_toggle"><h3>led_toggle</h3></a>

    <ul>
      <li><span lang="en">Input(s):</span>
	<span lang="hu">Bemenet(ek):</span>
	<span lang="en">R0: number of LED (0-23)</span>
	<span lang="hu">R0: LED sorszáma (0-23)</span>
      </li>
      <li><span lang="en">Output(s):</span>
	<span lang="hu">Kimenet(ek):</span>
	<span lang="en">-</span>
	<span lang="hu">-</span>
      </li>
    </ul>

    <p>A megadott szorszámú LED-et
    átkapcsolja. A <a href="computer_v2.html#logsys">LogSYS</a>
    kártyán a 0-7 sorszámú LED-ek zöldek, a 8-15 sorszámú LED-ek a 0-7
    címkéjű piros LED-ek, míg a 16-23 sorszámok a 0-7 címkéjű kék
    LED-ek.</p>

    
    <a name="led_set"><h3>led_set</h3></a>

    <ul>
      <li><span lang="en">Input(s):</span>
	<span lang="hu">Bemenet(ek):</span>
	<span lang="en">R0: number of LED (0-23), R1: value (bool)</span>
	<span lang="hu">R0: LED sorszáma (0-23), R1: érték (bool)</span>
      </li>
      <li><span lang="en">Output(s):</span>
	<span lang="hu">Kimenet(ek):</span>
	<span lang="en">-</span>
	<span lang="hu">-</span>
      </li>
    </ul>

    <p>A megadott szorszámú LED-et beállítja a megadott logikai érték
      alapján: IGAZ esetén bekapcsolja, HAMIS esetén kikapcsolja. A
      <a href="computer_v2.html#logsys">LogSYS</a> kártyán a 0-7
      sorszámú LED-ek zöldek, a 8-15 sorszámú LED-ek a 0-7 címkéjű
      piros LED-ek, míg a 16-23 sorszámok a 0-7 címkéjű kék
      LED-ek.</p>

    
    <a name="led_get"><h3>led_get</h3></a>

    <ul>
      <li><span lang="en">Input(s):</span>
	<span lang="hu">Bemenet(ek):</span>
	<span lang="en">R0: number of LED (0-23)</span>
	<span lang="hu">R0: LED sorszáma (0-23)</span>
      </li>
      <li><span lang="en">Output(s):</span>
	<span lang="hu">Kimenet(ek):</span>
	<span lang="en">Flag.C=1 if LED is ON</span>
	<span lang="hu">Flag.C=1 ha a LED bekapcsolt</span>
      </li>
    </ul>

    <p>A megadott szorszámú LED értéke alapján állítja be a C
      jelzőbitet: 1 lesz, ha a LED be van
      kapcsolva. A <a href="computer_v2.html#logsys">LogSYS</a>
      kártyán a 0-7 sorszámú LED-ek zöldek, a 8-15 sorszámú LED-ek a
      0-7 címkéjű piros LED-ek, míg a 16-23 sorszámok a 0-7 címkéjű
      kék LED-ek.</p>

    <hr>

    
    <a name="dsp"></a>
    
    <a name="dsp_ascii2seg"><h3>dsp_ascii2seg</h3></a>

    <ul>
      <li><span lang="en">Input(s):</span>
	<span lang="hu">Bemenet(ek):</span>
	<span lang="en">R0: char</span>
	<span lang="hu">R0: karakter</span>
      </li>
      <li><span lang="en">Output(s):</span>
	<span lang="hu">Kimenet(ek):</span>
	<span lang="en">R4: seven segment code</span>
	<span lang="hu">R4: hét szegmenses kód</span>
      </li>
    </ul>

    <p>Az R0 paraméterben megadott ascii karakter kódot
	átalakítja <a href="computer_v2.html#display">hét szegmenses
	kijelző</a> kóddá. A bemenetnek 0-127 között kell lennie.</p>

    <p>Amennyiben a karakter kisbetűs és nagybetűs változata közül
    csak az egyikhez adható meg szegmens kód, a függvény a másik
    változathoz is ezt a kódot adja majd. Például a 'p' és a 'P'
    esetében egyaránt a P képét eredményező kódot kapunk.</p>

    <p>Amennyiben a karakter, írásjel nem jeleníthető meg olvasható
    módon a hét szegmenses kijelzőn, az eredmény 0 lesz (sötét
    karakerkép).</p>

    <p>A függvény a "tizedespont" LED-et nem használja a képek
    előállítására, így a '.' esetében is 0-t kapunk.</p>

    <p><a href="segchars.html">Kijelző képek</a></p>
    

    <a name="dsp_str2seg"><h3>dsp_str2seg</h3></a>

    <ul>
      <li><span lang="en">Input(s):</span>
	<span lang="hu">Bemenet(ek):</span>
	<span lang="en">R0: string, R1: buffer</span>
	<span lang="hu">R0: sztring, R1: buffer</span>
      </li>
      <li><span lang="en">Output(s):</span>
	<span lang="hu">Kimenet(ek):</span>
	-
      </li>
    </ul>

    <p>Egy normál/pakolt formátumú szöveg
    átalakítása <a href="computer_v2.html#display">hét szegmenses
    kijkelző</a> kódokra, pakolt formában. Amennyiben kimeneti buffer
    címeként az R1 regiszterben a PORTC kimeneti regiszterét adjuk meg
    (<a href="computer_v2.html#gpio">GPIOC.ODR</a>), úgy az eredmény a
    hét szegmenses kijelzőn megjelenik.</p>

    <p>A függvény a kimeneti buffert nem ellenőrzi, a megfelelő méretű
    területről a hívás előtt kell gondoskodni.</p>

    <p>A függvény a szöveg hosszát nem ellenőrzi, ha bufferként a
    kimeneti port regisztereit használjuk, akkor a szöveg ne legyen 8
    karakternél hosszabb!</p>
      
    <hr>
  </body>
</html>
